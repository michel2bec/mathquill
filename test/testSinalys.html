<!DOCTYPE html>
<html>
<head>

<meta name="viewport" content="width=624">

<title>MathQuill Demo "SINALYS"</title>

<link rel="stylesheet" type="text/css" href="support/home.css">
<link rel="stylesheet" type="text/css" href="../build/mathquill.css">

<style type="text/css">
code span {
  font: 90% Verdana, sans-serif;
}
#codecogsimg {
  vertical-align: middle;
  border: none;
}
.mathquill-text-field {
  width: 100%;
}
#html-source {
  display: none;
  font-size: 90%;
  white-space: pre-wrap;
}
.mq-math-mode .mq-editable-field {
  min-width: 1cm;
}
.mathquill-math-static-field {
  border: .2em solid #0A00B0;
}
</style>

</head>
<body>
<div id="body">

<a href="http://github.com/laughinghan/mathquill"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="Fork me on GitHub!"></a>

<h1><a href="http://mathquill.github.com">MathQuill</a> Demo <small>local test page (SINALYS)</small></h1>

<p>Math textbox with initial LaTeX: <span id="editable-math" class="mathquill-math-field">\frac{d}{dx}\sqrt{x}=</span></p>

<p>Math textbox with problematic (for SINALYS) LaTeX: <span id="editable-math-2" class="mathquill-math-field">{{ab}^{cd}}^{ef}+{{{ij}^{kl}}^{mn}}^{op}+\\{{{{qr}^{st}}^{uv}}^{wx}}^{yz}+{\left(a^{1^{2^{3^{4^5}}}}+a^{1^{2^{3}}}\right)^h}^a_b+\left(\left(a^1\right)^2\right)_2^3\\+a^1_2+{a}^1_2</span></p>

<p>Latex source: <textarea id="latex-source" style="width:80%;vertical-align:top"></textarea></p>
<p>Latex source 2 : <textarea id="latex-source-2" style="width:80%;vertical-align:top"></textarea></p>
</div>
<div>
<button id="b01" onclick="window.HandleCmd('\\sqrt');">\\sqrt</button>
<button id="b02" onclick="window.HandleWrite('=');">=</button>
<button id="b03" onclick="window.HandleMerge('\\sqrt[{}]{#}');">\\sqrt[{}]{&#x25A1;}</button>
<button id="b04" onclick="window.HandleMerge('{#}^{}');">{&#x25A1;}^{}</button>
<button id="b05" onclick="window.HandleMerge('{#}_{}');">{&#x25A1;}_{}</button>
<button id="b06" onclick="window.HandleMerge('{#}_{}^{}');">{&#x25A1;}_{}^{}</button>
<button id="b07" onclick="window.HandleMerge('({})');">(&#x25A1;)</button>
<button id="b08" onclick="window.HandleMerge('{#}_{}^{}');">{&#x25A1;}_{}^{}</button>
<button id="b09" onclick="window.HandleMerge('{#}_{}^{}');">{&#x25A1;}_{}^{}</button>
</div>
<div>
  <span class="mathquill-math-static-field">{\underset{\mathrm{SP2}}{\mathrm{Constante}}}_{A}</span>
  <span class="mathquill-math-static-field">\underset{\mathrm{SP2}}{{\mathrm{Constante}}_{\mathrm{pos}}^{\mathrm{nbre}}}</span>
  <span class="mathquill-math-static-field">\overset{^}{\mathrm{underscore}}</span>
  <span class="mathquill-math-static-field">\underset{\mathrm{SP2}}{{\mathrm{Constante}}_{\mathrm{pos}}^{\mathrm{nbre}}}</span>
  <span class="mathquill-math-static-field">{{}^{\mathrm{StandEx}}\mathrm{NonVie}}_{\mathrm{rte}}</span>
  <span class="mathquill-math-static-field">{\underrightarrow{a}}^1_2 +a/b+\frac{a}{b}+\underset{u}{a}+\overset{o}{a}</span>
  <span class="mathquill-math-static-field">{_{_{_{f1}{e2}}{d3}}^{^{^ih}g}0_{1_{2_3}}^{a^{b^c}}}</span>
</div>
<div>
<button id="bLog1" onclick="window.logConsole('#editable-math-2');">logConsole</button>
<button id="bLog2" onclick="window.logConsoleAll('#editable-math-2');">logConsoleAll</button>
</div>
<script type="text/javascript" src="support/jquery-1.7.2.js"></script>
<script type="text/javascript" src="../build/mathquill.js"></script>
<script type="text/javascript">
MQ = MathQuill.getInterface(MathQuill.getInterface.MAX);
MQ.config( {
  spaceBehavesLikeTab: true,
  leftRightIntoCmdGoes: 'up',
  restrictMismatchedBrackets: true,
  sumStartsWithNEquals: false,
  supSubsRequireOperand: true,
  charsThatBreakOutOfSupSub: '+-=<>',
  autoSubscriptNumerals: false,
  autoCommands: 'RienDuRout',
  autoOperatorNames: 'RienDuRout',
  handlers: {
    enter: function(mathField) { mathField.write('\\\\'); }
  }
} );

var latexMath = $('#editable-math');
var latexMath2 = $('#editable-math-2');
var latexSource = $('#latex-source');
var latexSource2 = $('#latex-source-2');
var bSqrtCmd = $('#bSqrtCmd');
$(function() {
  $('.mathquill-math-field').each(function() { MQ.MathField(this); });
  $('.mathquill-math-static-field').each(function() { MQ.StaticMath(this); });
  var latexMath = MQ($('#editable-math')[0]);
  $(latexMath.el()).bind('keydown keypress', function() {
    setTimeout(function() {
      var latex = latexMath.latex();
      latexSource.val(latex);
    });
  }).keydown();
  latexMath.focus();

  latexSource.bind('keydown keypress', function() {
    var oldtext = latexSource.val();
    setTimeout(function() {
      var newtext = latexSource.val();
      if(newtext !== oldtext) {
        latexMath.latex(newtext);
      }
    });
  });

  if(location.hash && location.hash.length > 1)
    latexMath.latex(decodeURIComponent(location.hash.slice(1))).focus();

  var latexMath2 = MQ($('#editable-math-2')[0]);
  $(latexMath2.el()).bind('keydown keypress', function() {
    setTimeout(function() {
      var latex = latexMath2.latex();
      latexSource2.val(latex);
    });
  }).keydown();
  latexMath2.focus();

  latexSource2.bind('keydown keypress', function() {
    var oldtext = latexSource2.val();
    setTimeout(function() {
      var newtext = latexSource2.val();
      if(newtext !== oldtext) {
        latexMath2.latex(newtext);
      }
    });
  });
});

function HandleCmd(cmd) {
	var mathField = MQ.MathField($('#editable-math')[0]);
	mathField.cmd(cmd);
	mathField.focus();
}
function HandleWrite(cmd) {
	var mathField = MQ.MathField($('#editable-math')[0]);
	mathField.write(cmd);
	mathField.focus();
}
function HandleMerge(cmd) {
	var mathField = MQ.MathField($('#editable-math')[0]);
	mathField.merge(cmd);
	mathField.focus();
}
function logConsole(who) {
	var mathField = MQ.MathField($(who)[0]);
	mathField.__controller.root.logConsole();
}
function logConsoleAll(who) {
	var mathField = MQ.MathField($(who)[0]);
	mathField.__controller.root.logConsoleAll();
}
</script>
</body>
</html>

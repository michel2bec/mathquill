<!DOCTYPE html>
<html>
<head>

<meta name="viewport" content="width=624">

<title>MathQuill Demo "SINALYS"</title>

<link rel="stylesheet" type="text/css" href="support/home.css">
<link rel="stylesheet" type="text/css" href="../build/mathquill.css">

<style type="text/css">
code span {
  font: 90% Verdana, sans-serif;
}
#codecogsimg {
  vertical-align: middle;
  border: none;
}
.mathquill-text-field {
  width: 100%;
}
#html-source {
  display: none;
  font-size: 90%;
  white-space: pre-wrap;
}
.mq-math-mode .mq-editable-field {
  min-width: 1cm;
}
</style>

</head>
<body>
<div id="body">

<a href="http://github.com/laughinghan/mathquill"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="Fork me on GitHub!"></a>

<h1><a href="http://mathquill.github.com">MathQuill</a> Demo <small>local test page (SINALYS)</small></h1>

<p>Math textbox with initial LaTeX: <span id="editable-math" class="mathquill-math-field">\frac{d}{dx}\sqrt{x}=</span></p>

<p>Math textbox with problematic LaTeX (for SINALYS) LaTeX: <span id="editable-math-2" class="mathquill-math-field">{{ab}^{cd}}^{ef}</span></p>

<p>Latex source: <textarea id="latex-source" style="width:80%;vertical-align:top"></textarea></p>
</div>
<button id="bSqrtCmd" onclick="window.HandleCmd('\\sqrt');">\\sqrt (test)</button>
<button id="bSqrtCmd" onclick="window.HandleWrite('=');">=</button>
<button id="bSqrtCmd" onclick="window.HandleMerge('\\sqrt[{}]{#}');">\\sqrt[{}]{&#x25A1;} (test)</button>
<button id="bSqrtCmd" onclick="window.HandleMerge('{#}^{}');">{&#x25A1;}^{} (test)</button>
<button id="bSqrtCmd" onclick="window.HandleMerge('{#}_{}');">{&#x25A1;}_{} (test)</button>
<button id="bSqrtCmd" onclick="window.HandleMerge('{#}_{}^{}');">{&#x25A1;}_{}^{} (test)</button>
<button id="bSqrtCmd" onclick="window.HandleMerge('({})');">(&#x25A1;) (test)</button>
<button id="bSqrtCmd" onclick="window.HandleMerge('{#}_{}^{}');">{&#x25A1;}_{}^{} (test)</button>

<script type="text/javascript" src="support/jquery-1.7.2.js"></script>
<script type="text/javascript" src="../build/mathquill.js"></script>
<script type="text/javascript">
MQ = MathQuill.getInterface(MathQuill.getInterface.MAX);

//on document ready, mathquill-ify all `<tag class="mathquill-*">latex</tag>`
//elements according to their CSS class.
$(function() {
  $('.mathquill-math-field').each(function() { MQ.MathField(this); });
});

var latexMath = $('#editable-math');
var latexMath2 = $('#editable-math-2');
var latexSource = $('#latex-source');
var bSqrtCmd = $('#bSqrtCmd');
$(function() {
  var latexMath = MQ($('#editable-math')[0]);
  $(latexMath.el()).bind('keydown keypress', function() {
    setTimeout(function() {
      var latex = latexMath.latex();
      latexSource.val(latex);
//      location.hash = '#'+latex; //extremely performance-crippling in Chrome for some reason
      htmlSource.text(printTree(latexMath.html()));
      htmlTransplantExample.html(latexMath.html());
    });
  }).keydown();
  latexMath.focus();

  latexSource.bind('keydown keypress', function() {
    var oldtext = latexSource.val();
    setTimeout(function() {
      var newtext = latexSource.val();
      if(newtext !== oldtext) {
        latexMath.latex(newtext);
        htmlSource.text(printTree(latexMath.html()));
        htmlTransplantExample.html(latexMath.html());
      }
    });
  });

  if(location.hash && location.hash.length > 1)
    latexMath.latex(decodeURIComponent(location.hash.slice(1))).focus();
});

function HandleCmd(cmd) {
	var mathField = MQ.MathField($('#editable-math')[0]);
	mathField.cmd(cmd);
	mathField.focus();
}
function HandleWrite(cmd) {
	var mathField = MQ.MathField($('#editable-math')[0]);
	mathField.write(cmd);
	mathField.focus();
}
function HandleMerge(cmd) {
	var mathField = MQ.MathField($('#editable-math')[0]);
	mathField.merge(cmd);
	mathField.focus();
}
</script>
</body>
</html>
